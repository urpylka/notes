<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><meta property="og:site_name" content="urpylka՚s blog!" data-vmid="og:site_name"><title>Заметка по работе с Bash – urpylka՚s blog!</title><meta property="og:title" content="Заметка по работе с Bash" />
<meta property="og:description" content="В общем накопилось достаточно большое количество периодически гуглящихся вещей, которые хочу сохранить в своей заметке." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://urpylka.com/posts/post-45/" />
<meta property="article:published_time" content="2020-04-16T02:14:00+04:00" />
<meta property="article:modified_time" content="2020-04-16T02:14:00+04:00" /><meta property="og:site_name" content="urpylka՚s blog!" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Заметка по работе с Bash"/>
<meta name="twitter:description" content="В общем накопилось достаточно большое количество периодически гуглящихся вещей, которые хочу сохранить в своей заметке."/>
<link rel="icon" type="image/x-icon" href="https://urpylka.com/favicon.ico" />
	<link rel="apple-touch-icon" sizes="57x57" href="https://urpylka.com/favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="https://urpylka.com/favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="https://urpylka.com/favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="https://urpylka.com/favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="https://urpylka.com/favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="https://urpylka.com/favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="https://urpylka.com/favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="https://urpylka.com/favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="https://urpylka.com/favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="https://urpylka.com/favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="https://urpylka.com/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="https://urpylka.com/favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://urpylka.com/favicon/favicon-16x16.png">
	<link rel="manifest" href="https://urpylka.com/favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="https://urpylka.com/favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1"><meta itemprop="name" content="Заметка по работе с Bash">
<meta itemprop="description" content="В общем накопилось достаточно большое количество периодически гуглящихся вещей, которые хочу сохранить в своей заметке.">
<meta itemprop="datePublished" content="2020-04-16T02:14:00&#43;04:00" />
<meta itemprop="dateModified" content="2020-04-16T02:14:00&#43;04:00" />
<meta itemprop="wordCount" content="528">



<meta itemprop="keywords" content="ru,programming,linux,cheatsheet," /><link rel="stylesheet" type="text/css" media="screen" href="https://urpylka.com/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://urpylka.com/css/main.css" />
	<link rel="stylesheet" type="text/css" id="dark-scheme" href="https://urpylka.com/css/dark.css" />
	<link rel="stylesheet" type="text/css" href="https://urpylka.com/css/medium-font.css" />
<script type="text/javascript" >
	(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
	m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
	(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
ym("62022457", "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/62022457" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-163829261-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	<script src="https://urpylka.com/js/feather.min.js"></script><script src="https://urpylka.com/js/main.js"></script></head>


<body>
    <div class="container wrapper">
        <div class="header"><div class="flex-block">
		<div class="site-title"><a href="https://urpylka.com/">urpylka՚s blog!</a></div>
		<nav class="nav ico">
			<ul class="flat"><li><a href="https://github.com/urpylka" title="Github"><i data-feather="github"></i></a></li><li><a href="https://instagram.com/urpylka" title="Instagram"><i data-feather="instagram"></i></a></li><li class="edge-left"><span class="scheme-toggle"><a href="#" id="scheme-toggle"></a></span></li>
			</ul>
		</nav>
	</div><p id="subtitle">Programming, electronics, lifestyle</p><nav class="nav menu">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">Posts</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


        <div class="post one">
            <div class="post-header">
                
                <div class="meta">
                    <div class="date">
                        <span class="day">16</span>
                        <span class="rest">Apr 2020</span>
                    </div>
                </div>
                
                <div class="matter">
                    <h1 class="title">Заметка по работе с Bash</h1>
                </div>
            </div>

            <div class="markdown">
                <p>У меня накопилось достаточно большое количество переодически гуглящихся вещей, которые хочу сохранить в этой заметке. Заметка будет обновляться по мере того, как часто я с ней буду работать.</p>
<h2 id="перенаправления-и-pipe">Перенаправления и pipe</h2>
<p><code>|</code> - передача аргумента<br>
<code>&gt;</code> – передача вывода команды в новый файл или перезапись существующего файла<br>
<code>&gt;&gt;</code> - передача вывода команды в новый файл или дозапись с конца</p>
<p>Стандартный вывод команды происходит с числом <code>1</code>, вывод ошибок с числом <code>2</code>. Выводы перенаправлять в разные файлы отдельно.</p>
<p><code>2&gt;&amp;1</code> – перенаправляет вывод ошибки на стандартный вывод, поэтому они появляются вместе и могут быть совместно перенаправлены в файл.<br>
<code>2&gt;1</code> – перенаправит вывод ошибки в файл с именем <code>1</code>, а не в стандартный вывод <code>1</code>.</p>
<p>Источники:</p>
<ul>
<li><a href="https://unix.stackexchange.com/questions/89386/what-is-symbol-and-in-unix-linux">what is &raquo; symbol and &gt;&amp; in unix/Linux? [duplicate]</a></li>
<li><a href="https://www.linux.org.ru/forum/general/13119156">bash разница между &raquo; и |</a></li>
<li><a href="https://habr.com/ru/company/ruvds/blog/326594/">Bash-скрипты, часть 4: ввод и вывод</a></li>
</ul>
<h2 id="параллельно-исполнение-в-bash">Параллельно исполнение в Bash</h2>
<p><code>nohup</code> - запускает с игнорирование потери связи с пользователем (при выходе пользователя из системы все будет продолжаться в фоновом режиме)</p>
<p>Источники:</p>
<ul>
<li><a href="http://web.archive.org/web/20140226042820/http://user.hashcode.ru/questions/4573/bash-%D0%B2%D0%BE%D0%B7%D0%BC%D0%BE%D0%B6%D0%BD%D0%BE-%D0%BB%D0%B8-%D0%B2-linux-%D0%BF%D0%B0%D1%80%D0%B0%D0%BB%D0%BB%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5-%D0%B2%D1%8B%D0%BF%D0%BE%D0%BB%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-sh-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%B0">bash - Возможно ли в Linux параллельное выполнение .sh скрипта?</a></li>
<li><a href="https://mnorin.com/parallelnoe-vypolnenie-v-bash.html">Параллельное выполнение в bash</a></li>
</ul>
<h2 id="полезные-ссылки">Полезные ссылки</h2>
<ul>
<li>Изменение значения окружения указывающей на разделение списка <a href="http://www.f-notes.info/linux:bash_lists">f-notes.info</a></li>
<li>Хороший справочник по встроенным командам bash <a href="https://losst.ru/osnovnye-komandy-bash">losst.ru</a></li>
<li>bash awk <a href="https://habrahabr.ru/company/ruvds/blog/327754/">habr.ru</a></li>
<li>bash uniq (удаление повторов строк) <a href="https://www.linux.org.ru/forum/general/7476629">linux.org.ru</a></li>
<li>разница return and exit <a href="https://stackoverflow.com/questions/4419952/difference-between-return-and-exit-in-bash-functions">stackoverflow</a></li>
<li>Вывод echo \r <a href="https://losst.ru/komanda-echo-v-linux">losst.ru</a></li>
<li>переменные окружения <code>env</code>, <code>$SHELL</code>, <code>$EDITOR</code> <a href="http://unix1.jinr.ru/~lavr/howtostart.html">unix1.jinr.ru</a></li>
<li>firewall gui centos – <code>system-config-firewall</code></li>
</ul>
<h2 id="отладка-программ">Отладка программ</h2>
<ul>
<li><code>strace</code> - системные вызовы</li>
<li><code>ltrace</code> - трейсить вызовы из SO</li>
<li><code>ldd</code> - посмотреть зависимые библиотеки</li>
</ul>
<h2 id="поиск">Поиск</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000"># вывод логов содержащих строку `Aug  8 16:`</span>
grep <span style="color:#a31515">&#39;Aug  8 16:&#39;</span> aug8_daemon.log  &gt; aug8_16hour_daemon.log

grep user /etc/mysql/my.cnf

<span style="color:#008000"># вывод номера строки</span>
<span style="color:#008000"># -i – регистронезависимый поиск</span>
grep -bi <span style="color:#a31515">&#39;user&#39;</span> /etc/mysql/my.cnf

<span style="color:#008000"># вывести строки не содержащие неначинающиеся на #</span>
grep -v <span style="color:#a31515">&#39;^#&#39;</span> /etc/mysql/my.cnf
</code></pre></div><p>Источники:</p>
<ul>
<li><a href="https://admins.su/grep-nezamenimyj-instrument-linuksoida/">Примеры использования grep в Linux</a></li>
<li><a href="https://losst.ru/gerp-poisk-vnutri-fajlov-v-linux">Поиск текста в файлах Linux</a></li>
<li><a href="https://losst.ru/komanda-find-v-linux">Команда find в Linux</a></li>
</ul>
<h2 id="проверка-версии-debian">Проверка версии Debian</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /etc/os-release
</code></pre></div><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; lsb_release -a

No LSB modules are available.
Distributor ID: Raspbian
Description:    Raspbian GNU/Linux 9.1 (stretch)
Release:        9.1
Codename:       stretch
</code></pre></div><h2 id="копирование-с-exclude">Копирование с exclude</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">rsync -av --progress * --exclude sakis_install.sh
</code></pre></div><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo cp -r * -i sakis_install.sh
</code></pre></div><h2 id="добавление-прав-для-выполнения-sudo">Добавление прав для выполнения sudo</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">usermod -a -G sudo artem
</code></pre></div><h2 id="очистить-history">Очистить history</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat /dev/null &gt; ~/.bash_history &amp;&amp; history -c &amp;&amp; exit
</code></pre></div><p>Источник:</p>
<ul>
<li><a href="https://askubuntu.com/questions/191999/how-to-clear-bash-history-completely">How to clear bash history completely?</a></li>
</ul>
<h2 id="screen">Screen</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/19104894/screen-must-be-connected-to-a-terminal/25646444">Screen &ldquo;Must be connected to a Terminal&rdquo;</a></li>
<li><a href="https://admins.su/kak-polzovatsya-utilitoj-screen-v-linux/">Как пользоваться утилитой Screen в Linux</a></li>
</ul>
<h2 id="virt--virsh">virt / virsh</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000"># virsh commands</span>
virsh vol-list --pool libvirt_vg
virsh vol-delete /dev/libvirt_vg/backup-machine --pool libvirt_vg
virsh blockresize backup-machine --path /dev/libvirt_vg/backup-machine --size 115343360k

<span style="color:#008000"># Resetting Virtual Machine Settings (unconfigure)</span>
virt-sysprep
virt-configure
</code></pre></div><h2 id="пакетный-менеджер-apt-и-dpkg">Пакетный менеджер apt и dpkg</h2>
<ul>
<li><a href="https://system-admins.ru/kak-otkatit-obnovleniya-na-debian-ubuntu-linux-v-sluchae-problem/">Как откатить обновления на Debian / Ubuntu Linux в случае проблем</a></li>
<li><a href="http://web.archive.org/web/20170505152409/http://www.stanovlenie.org.ua/download-the-deb-packages-with-dependencies-for-offline-installation/">Скачиваем deb-пакеты с зависимостями для offline-установки.</a></li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000"># Мощное удаление всего что можно APT</span>
sudo apt-get remove lxde-common lxde-icon-theme omxplayer x11-common midori lxde python3 python3-minimal

<span style="color:#008000"># Удаление всех файлов связанных с `x11`</span>
sudo apt-get remove <span style="color:#00f">$(</span>sudo dpkg --get-selections | grep -v <span style="color:#a31515">&#34;deinstall&#34;</span> | grep x11 | sed s/install//<span style="color:#00f">)</span>

<span style="color:#008000"># Удаление всех файлов связанных с `audio`</span>
sudo apt-get remove <span style="color:#00f">$(</span>sudo dpkg --get-selections | grep -v <span style="color:#a31515">&#34;deinstall&#34;</span> | grep audio | sed s/install//<span style="color:#00f">)</span>

<span style="color:#008000"># Удаление неиспользуемых пакетов</span>
sudo apt-get autoremove
</code></pre></div><p>Управление установленными репозиториями – файл <code>/etc/apt/sources.list</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000"># Посмотреть какому пакету принадлежит файл</span>
sudo dpkg -S FILE

<span style="color:#008000"># Посмотреть какие файлы принадлежат пакету</span>
sudo dpkg -L ros-kinetic-catkin
</code></pre></div><h2 id="название-вкладки">Название вкладки</h2>
<p><img src="./assets/screenshot-2017-11-15-v-13.48.57.png" alt="image"></p>

            </div>

            <div class="tags">
                 
                <ul class="flat">
                    
                    <li><a href="/tags/ru">ru</a></li>
                    
                    <li><a href="/tags/programming">programming</a></li>
                    
                    <li><a href="/tags/linux">linux</a></li>
                    
                    <li><a href="/tags/cheatsheet">cheatsheet</a></li>
                    
                </ul>
                 
            </div>

</div>
    </div>
    <div class="footer wrapper">
	<nav class="nav">
		<div>2020  © Artem Smirnov |  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div><script>feather.replace()</script>
</body>

</html>