<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><meta property="og:site_name" content="urpylka’ös blog!" data-vmid="og:site_name"><title>Upgrade –∏ –º–∏–≥—Ä–∞—Ü–∏—è Grafana —Å SQLite –≤ PostgreSQL ‚Äì urpylka’ös blog!</title><meta property="og:title" content="Upgrade –∏ –º–∏–≥—Ä–∞—Ü–∏—è Grafana —Å SQLite –≤ PostgreSQL" />
<meta property="og:description" content="–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü —è –∑–∞–Ω–∏–º–∞–ª—Å—è –º–∏–≥—Ä–∞—Ü–∏–µ–π Grafana. –û–∫–∞–∑–∞–ª–æ—Å—å –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±–∞–∑—É –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ —è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª –∏ —á–∏—Ç–∞–ª –≤ —Å—Ç–∞—Ç—å—è—Ö. –ü–æ–¥ –∫–∞—Ç–æ–º, –∫–∞–∫ —è —ç—Ç–æ –¥–µ–ª–∞–ª." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://urpylka.com/posts/post-78/" />
<meta property="article:published_time" content="2022-10-28T16:13:00+02:00" />
<meta property="article:modified_time" content="2022-10-28T16:13:00+02:00" /><meta property="og:site_name" content="urpylka’ös blog!" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Upgrade –∏ –º–∏–≥—Ä–∞—Ü–∏—è Grafana —Å SQLite –≤ PostgreSQL"/>
<meta name="twitter:description" content="–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü —è –∑–∞–Ω–∏–º–∞–ª—Å—è –º–∏–≥—Ä–∞—Ü–∏–µ–π Grafana. –û–∫–∞–∑–∞–ª–æ—Å—å –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±–∞–∑—É –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ —è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª –∏ —á–∏—Ç–∞–ª –≤ —Å—Ç–∞—Ç—å—è—Ö. –ü–æ–¥ –∫–∞—Ç–æ–º, –∫–∞–∫ —è —ç—Ç–æ –¥–µ–ª–∞–ª."/>
<link rel="icon" type="image/x-icon" href="https://urpylka.com/favicon.ico" />
	<link rel="apple-touch-icon" sizes="57x57" href="https://urpylka.com/favicon/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="https://urpylka.com/favicon/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="https://urpylka.com/favicon/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="https://urpylka.com/favicon/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="https://urpylka.com/favicon/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="https://urpylka.com/favicon/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="https://urpylka.com/favicon/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="https://urpylka.com/favicon/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="https://urpylka.com/favicon/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="https://urpylka.com/favicon/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="https://urpylka.com/favicon/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="https://urpylka.com/favicon/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://urpylka.com/favicon/favicon-16x16.png">
	<link rel="manifest" href="https://urpylka.com/favicon/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="https://urpylka.com/favicon/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1"><meta itemprop="name" content="Upgrade –∏ –º–∏–≥—Ä–∞—Ü–∏—è Grafana —Å SQLite –≤ PostgreSQL">
<meta itemprop="description" content="–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü —è –∑–∞–Ω–∏–º–∞–ª—Å—è –º–∏–≥—Ä–∞—Ü–∏–µ–π Grafana. –û–∫–∞–∑–∞–ª–æ—Å—å –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±–∞–∑—É –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ —è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª –∏ —á–∏—Ç–∞–ª –≤ —Å—Ç–∞—Ç—å—è—Ö. –ü–æ–¥ –∫–∞—Ç–æ–º, –∫–∞–∫ —è —ç—Ç–æ –¥–µ–ª–∞–ª.">
<meta itemprop="datePublished" content="2022-10-28T16:13:00&#43;02:00" />
<meta itemprop="dateModified" content="2022-10-28T16:13:00&#43;02:00" />
<meta itemprop="wordCount" content="2539">



<meta itemprop="keywords" content="ru,programming," /><link rel="stylesheet" type="text/css" media="screen" href="https://urpylka.com/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://urpylka.com/css/main.css" />
	<link rel="stylesheet" type="text/css" id="dark-scheme" href="https://urpylka.com/css/dark.css" />
	<link rel="stylesheet" type="text/css" href="https://urpylka.com/css/medium-font.css" />
<script type="text/javascript" >
	(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
	m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
	(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
ym("62022457", "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/62022457" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-163829261-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

	<script src="https://urpylka.com/js/feather.min.js"></script><script src="https://urpylka.com/js/main.js"></script></head>


<body>
    <div class="container wrapper">
        <div class="header"><div class="flex-block">
		<div class="site-title"><a href="https://urpylka.com/">urpylka’ös blog!</a></div>
		<nav class="nav ico">
			<ul class="flat"><li><a href="https://github.com/urpylka" title="Github"><i data-feather="github"></i></a></li><li><a href="https://instagram.com/urpylka" title="Instagram"><i data-feather="instagram"></i></a></li><li class="edge-left"><span class="scheme-toggle"><a href="#" id="scheme-toggle"></a></span></li>
			</ul>
		</nav>
	</div><p id="subtitle">Programming, robotics, traveling</p><nav class="nav menu">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">Posts</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


        <div class="post one">
            <div class="post-header">
                
                <div class="meta">
                    <div class="date">
                        <span class="day">28</span>
                        <span class="rest">Oct 2022</span>
                    </div>
                </div>
                
                <div class="matter">
                    <h1 class="title">Upgrade –∏ –º–∏–≥—Ä–∞—Ü–∏—è Grafana —Å SQLite –≤ PostgreSQL</h1>
                </div>
            </div>

            <div class="markdown">
                <p>–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü —è –Ω–∞ —Ä–∞–±–æ—Ç–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∑–∞–Ω–∏–º–∞—é—Å—å –º–∏–≥—Ä–∞—Ü–∏–µ–π Grafana. –û–¥–Ω–∞ –∏–∑ –∑–∞–¥–∞—á –≤ —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º ‚Äì –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏–∑ <code>Grafana 7.5.9</code> –∏—Å–ø–æ–ª—å–∑—É—é—â—É—é SQLite –≤ <code>Grafana 9.2.0</code> —Å PostgreSQL. –û–∫–∞–∑–∞–ª–æ—Å—å –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±–∞–∑—É –Ω–µ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ —è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª –∏ —á–∏—Ç–∞–ª –≤ —Å—Ç–∞—Ç—å—è—Ö –¥—Ä—É–≥–∏—Ö –∞–≤—Ç–æ—Ä–æ–≤. –ß—Ç–æ –¥–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ç–æ, –æ–Ω–∞ –æ—Ç—Å—É—Å—Ç–≤—É–µ—Ç, –µ—Å—Ç—å —Ä–∞–∑–≤–µ —á—Ç–æ <a href="https://grafana.com/blog/2020/01/13/how-to-migrate-your-configuration-database/">–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ PostgreSQL –≤ MySQL</a>.</p>
<p>–†–µ—à–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–µ –ø–µ—Ä–≤–æ–º –ø–æ–ø–∞–ª–æ—Å—å:</p>
<ol>
<li><a href="https://community.zenduty.com/t/migrating-grafanas-database-from-sqlite-to-postgres/406">Migrating Grafana‚Äôs database from sqlite to postgres</a></li>
<li><a href="https://polyglot.jamie.ly/programming/2019/07/01/grafana-sqlite-to-postgres.html">Grafana SQLite Migration to PostgreSQL</a></li>
</ol>
<p>–í –∫—Ä–∞—Ç—Ü–µ –æ–Ω–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –ø–æ–¥—Ö–æ–¥:</p>
<ol>
<li>–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –∑–∞–ø—É—Å–∫–æ–º –≥—Ä–∞—Ñ–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PostgreSQL.</li>
<li>–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞ SQLite –±–∞–∑—ã –≤ PosgreSQL —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º <a href="https://pgloader.readthedocs.io/en/latest/">pgloader</a></li>
</ol>
<p>–û–¥–Ω–∞–∫–æ –∫–∞–∫ —è –Ω–µ –ø—ã—Ç–∞–ª—Å—è —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, —É –º–µ–Ω—è <code>pgloader</code> –ø–∞–¥–∞–ª —Å–æ –≤—Å–µ–≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–Ω–¥–æ–º–Ω–æ –∏ —á–∞—Å—Ç–∏—á–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–≤ –∫–∞–∫—É—é-—Ç–æ —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ª–∞–≥–∞—é —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –±–∞–∑–µ SQLite (–µ—Å—Ç—å –ª–∏ –Ω–µ–∑–∞—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏—Ç–¥), –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ —Å–≤–µ—Ä—Ö–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –Ω–µ—Ç, —Ç–æ –≤—Å–µ –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ.</p>
<p>–Ø –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª —Ä–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ <code>pgloader</code> –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –º–µ–Ω—è –±—ã–ª –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (—Ç–∞–∫ pgloader –Ω–µ –≤—ã–ª–µ—Ç–∞–ª –ø–æ –ø–∞–º—è—Ç–∏):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">load database
  from sqlite://&lt;ABSOLUTE_PATH&gt;/grafana.db
  into postgresql://&lt;DBUSER&gt;:&lt;DBPASS&gt;@&lt;DBURL&gt;:&lt;DBPORT&gt;/&lt;DBNAME&gt;
  with data only, reset sequences
  set work_mem to &#39;16MB&#39;, maintenance_work_mem to &#39;512 MB&#39;;
</code></pre></div><p>–û–¥–Ω–∞–∫–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª <code>pgloader</code> —É –º–µ–Ω—è —Ç–∞–∫ –∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –∏ —è –ø–æ–Ω—è–ª, —á—Ç–æ –Ω—É–∂–µ–Ω –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥. –ü–µ—Ä–≤–æ–π –∏–¥–µ–µ–π, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏—Ö–æ–¥–∏–ª–∞ –Ω–∞ —É–º –±—ã–ª–æ - –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é —ç—Ç–æ –±—ã–ª–æ –Ω–µ—Ä–µ–∞–ª—å–Ω–æ. –í–æ-–ø–µ—Ä–≤—ã—Ö, –ø–æ –ø—Ä–∏—á–∏–Ω–µ —Ç–æ–≥–æ, —á—Ç–æ —Ç–æ–ª—å–∫–æ –¥–∞—à–±–æ—Ä–¥–æ–≤ ‚âà1300 —à—Ç—É–∫, –∞ –≤–æ-–≤—Ç–æ—Ä—ã—Ö –∏–º–µ–ª–æ—Å—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –≤—Ä–æ–¥–µ –±–µ–∫–∞–ø–æ–≤ –¥–∞—à–±–æ—Ä–¥–æ–≤, –ø–∞–ø–æ–∫ —Å –ø—Ä–∞–≤–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ—Ç–µ–ª—è–º–∏, –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π, –∞–ª–µ—Ä—Ç–æ–≤ –∏—Ç–¥.</p>
<p>–î–∞–ª–µ–µ —è –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –≤ csv —Ñ–∞–π–ª—ã, –æ–¥–Ω–∞–∫–æ –±—ã–ª–æ –º–Ω–æ–≥–æ –Ω–µ—ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–∞–≤–∞–ª–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –æ—Ç–¥–µ–ª—è—Ç—å –ø–æ–ª—è –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.</p>
<p>–ò—Å—Ç–æ—á–Ω–∏–∫–∏:</p>
<ul>
<li><a href="https://www.anycodings.com/1questions/2630266/convert-sqlite-3-database-to-csv">Convert SQLite 3 database to CSV</a></li>
<li><a href="https://www.sqlitetutorial.net/sqlite-export-csv/">Export SQLite Database To a CSV File</a></li>
</ul>
<p>–í —Å–∫–æ—Ä–µ —è –Ω–∞—Ç–∫–Ω—É–ª—Å—è –Ω–∞ <a href="https://scicoding.com/migrating-from-sqlite-to-postgrse/">—Å—Ç–∞—Ç—å—é</a>, –ø—Ä–µ–¥–ª–∞–≥–∞—é—â—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ <a href="https://github.com/wbh1/grafana-sqlite-to-postgres">—Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞ Golang</a>.</p>
<p>–ù–æ –æ–ø—è—Ç—å, —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ—Ä—ã–≤–∞–ª—Å—è –æ—à–∏–±–∫–æ–π. –Ø –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π docker –æ–±—Ä–∞–∑, —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤, –Ω–æ –±–µ–∑—É—Å–ø–µ—à–Ω–æ.</p>
<p>–û–¥–Ω–∞–∫–æ —è —Ä–µ—à–∏–ª –∏–∑—É—á–∏—Ç—å, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å. –ü–æ—Å–º–æ—Ç—Ä–µ–≤ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥, —è –ø–æ–Ω—è–ª —á—Ç–æ –Ω–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ –Ω–µ—Ç, —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ —Ä–µ–≥—É–ª—è—Ä–∫–∞–º, –∏ —á—Ç–æ-—Ç–æ –ø—Ä–∞–≤–∏—Ç.</p>
<p>–Ø –ø–ª–æ—Ö–æ –ø–∏—à—É –Ω–∞ Golang, –∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –±–¥, –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∞–≤–∫–∏ –≤ –∫–æ–¥ —è —Ä–µ—à–∏–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã–π —è–∑—ã–∫ - Python. –ò –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ –¥–µ–π—Å—Ç–≤–∏–µ–º –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ Golang.</p>
<p>–ù–∏–∂–µ —è –ø—Ä–∏–µ–¥—É –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ –±–ª–æ–∫–∞–º –∏ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É—é –ø—Ä–æ—Ü–µ—Å—Å.</p>
<p>–°—Ä–∞–∑—É –æ–≥–æ–≤–æ—Ä—é—Å—å, —á—Ç–æ –Ω–µ —Å—á–∏—Ç–∞—é —Å–≤–æ–π —Å–∫—Ä–∏–ø—Ç –∏ —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –≥–æ—Ç–æ–≤—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏. –ü–æ—ç—Ç–æ–º—É —è –ø–æ–¥–∞—é —ç—Ç–æ –∫–∞–∫ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–ª—É—á–∞–µ –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ–±—Å–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –¥–æ–ø–∏–ª–∏—Ç—å –Ω–∞–ø–∏–ª—å–Ω–∏–∫–æ–º –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã.</p>
<h2 id="–ø–æ–ª—É—á–µ–Ω–Ω–æ–µ-—Ä–µ—à–µ–Ω–∏–µ">–ü–æ–ª—É—á–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ</h2>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000">#! /usr/bin/env python3</span>
<span style="color:#00f">import</span> re, time

srcfile = <span style="color:#a31515">&#34;./grafana.sql&#34;</span>
resfile = <span style="color:#a31515">&#34;./resfile.sql&#34;</span>

<span style="color:#00f">print</span>(<span style="color:#a31515">&#34;</span><span style="color:#a31515">\033</span><span style="color:#a31515">[1m#</span><span style="color:#a31515">\n</span><span style="color:#a31515"># This program is for preparing SQL converted from SQLite to PostgreSQL&#34;</span>)
<span style="color:#00f">print</span>(<span style="color:#a31515">&#34;# Source file: &#34;</span> + srcfile)
<span style="color:#00f">print</span>(<span style="color:#a31515">&#34;# Result file: &#34;</span> + resfile)
<span style="color:#00f">print</span>(<span style="color:#a31515">&#34;#</span><span style="color:#a31515">\033</span><span style="color:#a31515">[0;0m</span><span style="color:#a31515">\n</span><span style="color:#a31515">&#34;</span>)

last_time = int(time.time())
<span style="color:#00f">def</span> howlong():
    <span style="color:#00f">global</span> last_time
    _now = int(time.time())
    _dif = _now - last_time
    last_time = _now
    <span style="color:#00f">return</span> <span style="color:#a31515">&#34; (</span><span style="color:#a31515">%s</span><span style="color:#a31515">s)</span><span style="color:#a31515">\n</span><span style="color:#a31515">&#34;</span> % (_dif)

doings = 23
</code></pre></div><p>–≠—Ç–æ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω–∞—è —á–∞—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞. –í –Ω–µ–π –≤—ã –º–æ–∂–µ—Ç–µ –≤–∏–¥–µ—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–≤—É—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏–≤–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥, –∞ —Ç–∞–∫–∂–µ –æ–ø—Ä–µ–ª–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–∞–º –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π.</p>
<p>–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è <code>doings</code> ‚Äì –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π, –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å —Å–∫–æ–ª—å–∫–æ –µ—â–µ –¥–µ–π—Å—Ç–≤–∏–π –æ—Å—Ç–∞–ª–æ—Å—å.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#00f">with</span> open(srcfile, <span style="color:#a31515">&#39;r&#39;</span>) <span style="color:#00f">as</span> f:
    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;&gt; 1/</span><span style="color:#a31515">%d</span><span style="color:#a31515"> Uploading the source file to the memory&#34;</span> % (doings))
    content = f.read()
    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;‚úÖ Done&#34;</span> + howlong())
</code></pre></div><p>–Ø –ø–∏—Å–∞–ª –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–µ —Å—É–ø–µ—Ä-—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å –ø–æ—Å—Ç—Ä–æ—á–Ω—ã–º —á—Ç–µ–Ω–∏–µ–º —Ñ–∞–π–ª–∞, –∞ —Ü–µ–ª–∏–∫–æ–º —á–∏—Ç–∞–ª —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å, –∏ –∑–∞—Ç–µ–º —É–∂–µ —Ä–∞–±–æ—Ç–∞–ª. –î—É–º–∞—é —á—Ç–æ –¥–ª—è –±–æ–ª—å–Ω–∏—Å—Ç–≤–æ –∫–µ–π—Å–æ–≤ —Å Grafana —ç—Ç–æ –ø–æ–¥–æ–π–¥–µ—Ç. –¢–∫ –¥–∞–∂–µ –ø—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–±–∏—Ç–æ–π –¥–∞–Ω–Ω—ã–º–∏ Grafana SQL-–¥–∞–º–ø –≤–µ—Å–∏—Ç 1.3GB.</p>
<p>–í —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –Ω–µ –≤–∏–∂—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ sql-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —Ç–∫ –≤—Å–µ, —Å —á–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞ - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ <code>INSERT</code>. –ö–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é sqlite3 –≤—Å–µ–≥–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;&gt; 2/</span><span style="color:#a31515">%d</span><span style="color:#a31515"> Deleting all statements except &#39;INSERT INTO&#39; &#34;</span> % (doings))
    match = re.compile(<span style="color:#a31515">&#34;(?m)[</span><span style="color:#a31515">\r\n</span><span style="color:#a31515">]*^(?!INSERT INTO.*)(.*)$&#34;</span>, re.IGNORECASE)
    content = match.sub(<span style="color:#a31515">&#39;&#39;</span>, content)
    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;‚úÖ Done&#34;</span> + howlong())
</code></pre></div><p>–ó–∞–∫–æ–Ω–æ–º–µ—Ä–Ω—ã–π —à–∞–≥ - —É–¥–∞–ª—è–µ–º –≤—Å–µ —Å—Ç—Ä–æ–∫–∏, –Ω–µ –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è –Ω–∞ <code>INSERT INTO</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;&gt; 3/</span><span style="color:#a31515">%d</span><span style="color:#a31515"> Removing inserts to &#39;sqlite_sequence&#39;, &#39;user_auth&#39;&#34;</span> % (doings))
    match = re.compile(<span style="color:#a31515">&#34;(?m)[</span><span style="color:#a31515">\r\n</span><span style="color:#a31515">]*^INSERT INTO (sqlite_sequence|user_auth) VALUES.*;$&#34;</span>, re.IGNORECASE)
    content = match.sub(<span style="color:#a31515">&#39;&#39;</span>, content)
    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;‚úÖ Done&#34;</span> + howlong())
</code></pre></div><p>–¢–∞–∫–∂–µ —É–¥–∞–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–∞–±–ª–∏—Ü <code>sqlite_sequence</code> –∏ –¥–ª—è <code>user_auth</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;&gt; 4/</span><span style="color:#a31515">%d</span><span style="color:#a31515"> Fix char conversion (char -&gt; chr)&#34;</span> % (doings))
    match = re.compile(<span style="color:#a31515">&#34;char\(10\)\)&#34;</span>, re.IGNORECASE)
    content = match.sub(<span style="color:#a31515">&#39;chr(10))&#39;</span>, content)
    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;‚úÖ Done&#34;</span> + howlong())
</code></pre></div><p>–ó–∞–º–µ–Ω—è–µ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é <code>char(10)</code> –Ω–∞ <code>chr(10)</code> –≤ sql-—Ñ—É–Ω–∫—Ü–∏—è <code>replace</code> –≤ —Å–æ–æ—Ç–≤–µ—Å—Ç–≤–∏–∏ —Å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é —Å Postgres.</p>
<p>–î–∞–ª–µ–µ —è –ø—Ä–µ–¥–ª–∞–≥–∞—é —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –±–∞–π—Ç–æ–≤—ã–µ –∏–ª–∏ –±—É–ª–µ–≤—ã –ø–æ–ª—è. –î–ª—è —ç—Ç–æ–≥–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Ç–æ—Ä–æ–π –ø—É–Ω–∫—Ç –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –Ω–∏–∂–µ –≤ —Å—Ç–∞—Ç—å–µ. –î–ª—è Grafana 9.2.0 —É –º–µ–Ω—è –ø–æ–ª—É—á–∏–ª—Å—è —Å–ª–µ–¥—É—é—â–∏–π —Å–ø–∏—Å–æ–∫:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">bool  byte  tablename
[+]   [-]   alert
[+]   [-]   alert_configuration
[-]   [-]   alert_instance
[+]   [-]   alert_notification
[-]   [-]   alert_notification_state
[-]   [-]   alert_rule
[-]   [-]   alert_rule_version
[+]   [-]   api_key
[-]   [-]   annotation
[-]   [-]   annotation_tag
[-]   [-]   api_key
[-]   [-]   builtin_role
[+]   [-]   dashboard
[-]   [-]   dashboard_acl
[+]   [+]   dashboard_snapshot
[-]   [-]   dashboard_tag
[-]   [-]   dashboard_version
[+]   [+]   data_keys
[+]   [-]   data_source
[-]   [-]   kv_store
[+]   [-]   migration_log
[-]   [-]   org
[-]   [-]   org_user
[-]   [-]   permission
[-]   [-]   playlist
[-]   [-]   playlist_item
[+]   [-]   plugin_setting
[-]   [-]   preferences
[+]   [-]   role
[-]   [-]   secrets
[-]   [-]   server_lock
[-]   [-]   short_url
[-]   [-]   sqlite_sequence
[-]   [-]   star
[-]   [-]   tag
[-]   [-]   team
[+]   [-]   team_member
[+]   [-]   user
[-]   [-]   user_auth
[+]   [-]   user_auth_token
[-]   [-]   user_role
</code></pre></div><p>–¢–∞–∫–∂–µ, —á—Ç–æ–±—ã –Ω–µ –¥–µ–ª–∞—Ç—å –ª–∏—à–Ω–µ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–µ–¥–ª–∞–≥–∞—é –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ —É–≤–∏–¥–µ—Ç—å –≤ –∫–∞–∫–∏–µ –≤–æ–æ–±—â–µ —Ç–∞–±–ª–∏—Ü—ã –º—ã –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat grafana.sql | grep <span style="color:#a31515">&#34;INSERT INTO&#34;</span> | cut -d <span style="color:#a31515">&#39; &#39;</span> -f 3 | uniq | sort
</code></pre></div><p>–ü–µ—Ä–µ–π–¥–µ–º –∫ —Å–ª–µ–¥—É—é—â–µ–π —á–∞—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;&gt; 5/</span><span style="color:#a31515">%d</span><span style="color:#a31515"> Fixing HEX syntax for &#39;dashboard_snapshot&#39;&#34;</span> % (doings))
    match = re.compile(<span style="color:#a31515">&#34;(?m)(?&lt;=^INSERT INTO dashboard_snapshot VALUES\()(.*)(,X</span><span style="color:#a31515">\&#39;</span><span style="color:#a31515">)([a-fA-F0-9]+</span><span style="color:#a31515">\&#39;</span><span style="color:#a31515">)&#34;</span>, re.IGNORECASE)
    content = match.sub(<span style="color:#a31515">r</span><span style="color:#a31515">&#34;\1,&#39;</span><span style="color:#a31515">\\</span><span style="color:#a31515">x\3&#34;</span>, content)
    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;‚úÖ Done&#34;</span> + howlong())

    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;&gt; 6/</span><span style="color:#a31515">%d</span><span style="color:#a31515"> Fixing HEX syntax for &#39;data_keys&#39;&#34;</span> % (doings))
    match = re.compile(<span style="color:#a31515">&#34;(?m)(?&lt;=^INSERT INTO data_keys VALUES\()(.*)(,X</span><span style="color:#a31515">\&#39;</span><span style="color:#a31515">)([a-fA-F0-9]+</span><span style="color:#a31515">\&#39;</span><span style="color:#a31515">)&#34;</span>, re.IGNORECASE)
    content = match.sub(<span style="color:#a31515">r</span><span style="color:#a31515">&#34;\1,&#39;</span><span style="color:#a31515">\\</span><span style="color:#a31515">x\3&#34;</span>, content)
    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;‚úÖ Done&#34;</span> + howlong())
</code></pre></div><p>–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—è, –∞ —Ç–∞–∫–∂–µ –±–∞–π—Ç–æ–≤—ã–µ –ø–æ–ª—è, SQLite –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤ –ø–æ–ª—è –≤–∏–¥–∞ <code>X'[a-fA-F0-9]'</code>. –ù–∞–º –∂–µ –Ω—É–∂–Ω–æ –≤ —Ç–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å –±–∞–π—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–º–µ–Ω—è—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å PostgreSQL ‚Äì <code>'\x[a-fA-F0-9]'</code>. –ü–æ–ª—å–∑—É—è—Å—å —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –≤–≤–µ—Ä—Ö—É, –∞ —Ç–∞–∫–∂–µ —Å–ø–∏—Å–∫–æ–º —Ç–∞–±–ª–∏—Ü –≤ –∫–æ—Ç–æ—Ä—ã–µ –º—ã –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —É –º–µ–Ω—è –ø–æ–ª—É—á–∏–ª–∏—Å—å —Ç–∞–ª–±–ª–∏—Ü—ã ‚Äì <code>dashboard_snapshot</code> –∏ <code>data_keys</code> –≤ –∫–æ—Ç–æ—Ä—ã–µ —É –º–µ–Ω—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ, –∞ —Ç–∞–∫–∂–µ –≤ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –±–∞–π—Ç–æ–≤—ã–µ –ø–æ–ª—è.</p>
<p>–î–∞–ª–µ–µ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±–∞—Ç–æ–≤—ã–µ –ø–æ–ª—è –≤–∏–¥–∞ <code>X'[a-fA-F0-9]'</code> –Ω—É–∂–Ω–æ –±—ã–ª–æ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–º –≤–∏–¥–µ –∑–∞–ø–∏—Å–∞—Ç—å –≤ PosgtreSQL. –Ø –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤ –∫–æ–¥–µ</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#008000"># def hexdecode(hexmatch):</span>
    <span style="color:#008000">#     _hexmatch = hexmatch.group(1)</span>
    <span style="color:#008000">#     _hexstring = bytes.fromhex(_hexmatch[2:-1])</span>
    <span style="color:#008000">#     _hexstring = str(_hexstring)[1:] # delete &#39;b&#39;</span>
    <span style="color:#008000">#     return _hexstring</span>
</code></pre></div><p>–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–Ω–æ –≤–æ—Ç —Ç–∞–∫:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#008000"># –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–¥–æ–º –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞</span>
<span style="color:#00f">import</span> re
content = <span style="color:#a31515">&#34;X&#39;48656c6c6f20476f7068657221&#39;&#34;</span>
match = re.compile(<span style="color:#a31515">&#34;(?m)X</span><span style="color:#a31515">\&#39;</span><span style="color:#a31515">([a-fA-F0-9]+)</span><span style="color:#a31515">\&#39;</span><span style="color:#a31515">&#34;</span>, re.IGNORECASE)

<span style="color:#00f">def</span> hexdecode(hexmatch):
    _hexstring = hexmatch.group(1)
    _hexstring = bytes.fromhex(_hexstring)
    _hexstring = _hexstring.decode(<span style="color:#a31515">&#34;ascii&#34;</span>)
    _hexstring = <span style="color:#a31515">&#34;&#39;</span><span style="color:#a31515">%s</span><span style="color:#a31515">&#39;&#34;</span> % (_hexstring)
    <span style="color:#00f">return</span> _hexstring

content = match.sub(hexdecode, content)
<span style="color:#00f">print</span>(content)
</code></pre></div><p>–û–¥–Ω–∞–∫–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ Python –ø–ª–æ—Ö–∞—è –∏–¥–µ—è, —Ç–∫ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º —ç—Ç–æ –ª–æ–º–∞–µ—Ç —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü —Å–∏–º–≤–æ–ª–æ–≤ —Å–ª—É–∂–∞—â–∏—Ö –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–µ–π –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –ü–æ–ª–∞–≥–∞—é –Ω–µ —Å–ª—É—á–∞–π–Ω–æ SQLite —ç—Ç–∏ –ø–æ–ª—è –ø–µ—Ä–µ–≤–µ–ª –≤ HEX. –ò —è –Ω–∞—à–µ–ª –¥—Ä—É–≥–æ–µ —Ä–µ—à–µ–Ω–∏–µ.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#00f">def</span> nodecode(hexmatch):
        _hexmatch = hexmatch.group(1)[2:] <span style="color:#008000"># cut X</span>
        _hexmatch = <span style="color:#a31515">&#34;,convert_from(decode(&#34;</span> + _hexmatch + <span style="color:#a31515">&#34;,&#39;hex&#39;),&#39;utf-8&#39;)&#34;</span>
        <span style="color:#00f">return</span> _hexmatch

    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;&gt; 7/</span><span style="color:#a31515">%d</span><span style="color:#a31515"> Wrapping HEX data&#34;</span> % (doings))
    match = re.compile(<span style="color:#a31515">&#34;(,X</span><span style="color:#a31515">\&#39;</span><span style="color:#a31515">[a-fA-F0-9]*</span><span style="color:#a31515">\&#39;</span><span style="color:#a31515">)&#34;</span>)
    content = match.sub(nodecode, content)
    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;‚úÖ Done&#34;</span> + howlong())
</code></pre></div><p>–ó–¥–µ—Å—å —è –º–µ–Ω—è—é –ø–æ–ª—è –≤–∏–¥–∞ <code>X'[a-fA-F0-9]'</code>, –Ω–∞ <code>convert_from(decode([a-fA-F0-9],'hex'),'utf-8')</code>. <code>convert_from</code> –∏ <code>decode</code> —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ PosgreSQL, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä—ã—Ö —è –º–æ–≥—É –Ω–∞ –ª–µ—Ç—É —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å HEX –ø–æ–ª–µ –∏ –∑–∞–ø–∏—Å–∞—Ç—å –µ–≥–æ –≤ –±–∞–∑—É, –Ω–µ –¥–µ–ª–∞—è —ç—Ç–æ –≤ SQL-—Ñ–∞–π–ª–µ.</p>
<p>–ò—Å—Ç–æ—á–Ω–∏–∫–∏:</p>
<ul>
<li><a href="https://overcoder.net/q/222917/hex-%D0%B8-unhex-%D0%B2-mysql-%D1%8D%D0%BA%D0%B2%D0%B8%D0%B2%D0%B0%D0%BB%D0%B5%D0%BD%D1%82%D0%BD%D1%8B-%D0%B2-postgres">HEX () –∏ UNHEX () –≤ MySQL —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã –≤ Postgres?</a></li>
<li><a href="https://gist.github.com/jpetitcolas/5967887">gist jpetitcolas/gist:5967887</a></li>
</ul>
<p>–î–∞–ª–µ–µ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ—Ç–æ—Ä—ã—Ö –º—ã –æ–±–æ–∑–Ω–∞—á–∏–º –ø–æ—Ä—è–¥–∫–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞ –±—É–ª–µ–≤—ã—Ö –ø–æ–ª–µ–π –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö (–¥–ª—è —ç—Ç–æ–≥–æ –º—ã –∏ –≥–æ—Ç–æ–≤–∏–ª–∏ —Å–ø–∏—Å–æ–∫ –≤—ã—à–µ).</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    bool_pos = {
        <span style="color:#a31515">&#34;alert&#34;</span>: [13],
        <span style="color:#a31515">&#34;alert_configuration&#34;</span>: [5],
        <span style="color:#a31515">&#34;alert_notification&#34;</span>: [8, 10, 11],
        <span style="color:#a31515">&#34;api_key&#34;</span>: [11],
        <span style="color:#a31515">&#34;dashboard&#34;</span>: [14, 15, 17],
        <span style="color:#a31515">&#34;dashboard_snapshot&#34;</span>: [7],
        <span style="color:#a31515">&#34;data_keys&#34;</span>: [2],
        <span style="color:#a31515">&#34;data_source&#34;</span>: [11, 14, 18, 20],
        <span style="color:#a31515">&#34;migration_log&#34;</span>: [4],
        <span style="color:#a31515">&#34;plugin_setting&#34;</span>: [4, 5],
        <span style="color:#a31515">&#34;role&#34;</span>: [11],
        <span style="color:#a31515">&#34;team_member&#34;</span>: [7],
        <span style="color:#a31515">&#34;user&#34;</span>: [11, 12, 18, 19],
        <span style="color:#a31515">&#34;user_auth_token&#34;</span>: [7],
    }
</code></pre></div><p>–î–∞–ª–µ–µ —è –Ω–∞–ø–∏—Å–∞–ª –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–≥—É –ø–∞—Ä—Å–∏—Ç—å —Å—Ç—Ä–æ–∫—É –æ—Ç–¥–µ–ª—è—Ç—å –ø–æ–ª—è –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#00f">def</span> list_conv(_match):
        l = []
        state = <span style="color:#a31515">&#34;empty&#34;</span> <span style="color:#008000"># &#34;empty&#34;, &#34;null&#34;, &#34;digit&#34;, &#34;string&#34;, &#34;sqlfunc&#34;</span>
        word = <span style="color:#a31515">&#34;&#34;</span>
        quotes = 0

        <span style="color:#00f">for</span> i <span style="color:#00f">in</span> range(len(_match)):
            match _match[i]:
                case <span style="color:#a31515">&#39;</span><span style="color:#a31515">\&#39;</span><span style="color:#a31515">&#39;</span>:
                    <span style="color:#00f">if</span> state == <span style="color:#a31515">&#34;empty&#34;</span>:
                        state = <span style="color:#a31515">&#34;string&#34;</span>
                    <span style="color:#00f">elif</span> state == <span style="color:#a31515">&#34;string&#34;</span>:
                        <span style="color:#00f">if</span> _match[i-1] != <span style="color:#a31515">&#39;</span><span style="color:#a31515">\\</span><span style="color:#a31515">&#39;</span>:
                            state = <span style="color:#a31515">&#34;empty&#34;</span>
                    word += _match[i]
                case <span style="color:#a31515">&#39;,&#39;</span>:
                    <span style="color:#00f">if</span> state == <span style="color:#a31515">&#34;empty&#34;</span> <span style="color:#00f">or</span> state == <span style="color:#a31515">&#34;digit&#34;</span> <span style="color:#00f">or</span> state == <span style="color:#a31515">&#34;null&#34;</span>:
                        l.append(word)
                        word = <span style="color:#a31515">&#34;&#34;</span>
                        state = <span style="color:#a31515">&#34;empty&#34;</span>
                    <span style="color:#00f">else</span>:
                        word += _match[i]
                case <span style="color:#a31515">&#39;(&#39;</span>:
                    <span style="color:#00f">if</span> state == <span style="color:#a31515">&#34;sqlfunc&#34;</span>:
                        <span style="color:#00f">if</span> _match[i-1] != <span style="color:#a31515">&#39;</span><span style="color:#a31515">\\</span><span style="color:#a31515">&#39;</span>:
                            quotes += 1
                    word += _match[i]
                case <span style="color:#a31515">&#39;)&#39;</span>:
                    <span style="color:#00f">if</span> state == <span style="color:#a31515">&#34;sqlfunc&#34;</span>:
                        <span style="color:#00f">if</span> _match[i-1] != <span style="color:#a31515">&#39;</span><span style="color:#a31515">\\</span><span style="color:#a31515">&#39;</span>:
                            quotes -= 1
                        <span style="color:#00f">if</span> quotes == 0:
                            state = <span style="color:#a31515">&#34;empty&#34;</span>
                    word += _match[i]
                case _:
                    <span style="color:#00f">if</span> state == <span style="color:#a31515">&#34;empty&#34;</span>:
                        <span style="color:#00f">if</span> _match[i].isdigit():
                            state = <span style="color:#a31515">&#34;digit&#34;</span>
                        <span style="color:#00f">elif</span> _match[i].isalpha():
                            <span style="color:#00f">if</span> _match[i] == <span style="color:#a31515">&#34;N&#34;</span>:
                                state = <span style="color:#a31515">&#34;null&#34;</span>
                            <span style="color:#00f">else</span>:
                                state = <span style="color:#a31515">&#34;sqlfunc&#34;</span>


                    word += _match[i]
        l.append(word)
        <span style="color:#00f">return</span> l
</code></pre></div><p>–ê —Ç–∞–∫–∂–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –±—É–ª–µ–≤—ã—Ö –ø–æ–ª–µ–π –≤ —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É—é—â–∏–π –¥–ª—è PostgreSQL —Ñ–æ—Ä–º–∞—Ç.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#00f">def</span> bool_conv(_table, _match):
        splited = list_conv(_match.group(0))
        <span style="color:#00f">global</span> bool_pos
        res = <span style="color:#a31515">&#34;&#34;</span>
        <span style="color:#00f">for</span> i <span style="color:#00f">in</span> bool_pos[_table]:
            match splited[i-1]:
                case <span style="color:#a31515">&#39;0&#39;</span>:
                    splited[i-1] = <span style="color:#a31515">&#34;FALSE&#34;</span>
                case <span style="color:#a31515">&#39;1&#39;</span>:
                    splited[i-1] = <span style="color:#a31515">&#34;TRUE&#34;</span>
                case <span style="color:#a31515">&#39;NULL&#39;</span>:
                    splited[i-1] = <span style="color:#a31515">&#34;NULL&#34;</span>
                case <span style="color:#a31515">&#39;null&#39;</span>:
                    splited[i-1] = <span style="color:#a31515">&#34;NULL&#34;</span>
                case _:
                    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;Error: This value should be boolean!&#34;</span>)
                    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;Position: </span><span style="color:#a31515">%s</span><span style="color:#a31515">, value: </span><span style="color:#a31515">%s</span><span style="color:#a31515">&#34;</span> % (i,splited[i-1]))
                    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;Table: </span><span style="color:#a31515">%s</span><span style="color:#a31515">, data: </span><span style="color:#a31515">%s</span><span style="color:#a31515">&#34;</span> % (_table,splited))
                    exit(1)
        <span style="color:#00f">return</span> <span style="color:#a31515">&#39;,&#39;</span>.join(splited)
</code></pre></div><p>–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ SQLite –Ω–∞ –º–µ—Å—Ç–∞—Ö –≥–¥–µ <code>TRUE</code> - –≤—ã–¥–∞–µ—Ç –Ω–∞–º <code>1</code>, –≥–¥–µ <code>FALSE</code> ‚Äì <code>0</code>. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø–∏—Å–∞—Ç—å –Ω–æ–ª—å –∏ –µ–¥–∏–Ω–∏—Ü—É –≤ –±—É–ª–µ–≤–æ –ø–æ–ª–µ –≤ PostgreSQL –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    i = 7 <span style="color:#008000"># doings before</span>
    <span style="color:#00f">for</span> table <span style="color:#00f">in</span> bool_pos:
        i += 1
        <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;&gt; </span><span style="color:#a31515">%d</span><span style="color:#a31515">/</span><span style="color:#a31515">%d</span><span style="color:#a31515"> Fixing boolean values for &#39;</span><span style="color:#a31515">%s</span><span style="color:#a31515">&#39;&#34;</span> % (i, doings, table))
        match = re.compile(<span style="color:#a31515">&#34;(?&lt;=INSERT INTO </span><span style="color:#a31515">%s</span><span style="color:#a31515"> VALUES\().*(?=\);)&#34;</span> % (table), re.IGNORECASE)
        content = match.sub(<span style="color:#00f">lambda</span> match: bool_conv(table, match), content)
        <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;‚úÖ Done&#34;</span> + howlong())
</code></pre></div><p>–ò —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ —Å –∏ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è –≤ –ø–æ—Ä—è–¥–æ–∫ –∑–Ω–∞—á–µ–Ω–∏–π –±—É–ª–µ–≤—ã—Ö –ø–æ–ª–µ–π.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">    print(&#34;&gt; 22/%d Setting quotes above tables name&#34; % (doings))
    match = re.compile(&#34;(?&lt;=INSERT INTO )([\w]+)(?= VALUES\(.*\);)&#34;, re.IGNORECASE)
    content = match.sub(r&#39;&#34;\1&#34;&#39;, content)
    print(&#34;‚úÖ Done&#34; + howlong())
</code></pre></div><p>–ü—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äì –≤–∑—è—Ç–∏–µ –≤ –¥–≤–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü, –æ–ø—è—Ç—å –∂–µ –ø—Ä–æ–¥–∏–∫—Ç–æ–≤–∞–Ω–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º PostgreSQL.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;&gt; </span><span style="color:#a31515">%d</span><span style="color:#a31515">/</span><span style="color:#a31515">%d</span><span style="color:#a31515"> Saving result to </span><span style="color:#a31515">%s</span><span style="color:#a31515">&#34;</span> % (doings, doings, resfile))
    <span style="color:#00f">with</span> open(resfile, <span style="color:#a31515">&#39;w&#39;</span>) <span style="color:#00f">as</span> f2:
        f2.write(content)
    <span style="color:#00f">print</span>(<span style="color:#a31515">&#34;üéâ Done&#34;</span> + howlong())
</code></pre></div><p>–ù—É –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äì —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ <code>resfile.sql</code>.</p>
<p>–°–∫—Ä–∏–ø—Ç —Ü–µ–ª–∏–∫–æ–º –≤—ã –º–æ–∂–µ—Ç–µ —Å–∫–∞—á–∞—Ç—å <a href="./grafana_sql_migrator.py">–∑–¥–µ—Å—å</a>.</p>
<h2 id="–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è-–ø–æ-–º–∏–≥—Ä–∞—Ü–∏–∏-–±–¥">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î</h2>
<ol>
<li>
<p>–û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é Grafana –¥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –≤–µ—Ä—Å–∏–∏, –Ω–µ –º–µ–Ω—è—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º Grafana, –∂–¥—ë–º —á—Ç–æ–±—ã –æ–Ω–∞ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å, —Å–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ WebUI.</p>
</li>
<li>
<p>–ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –±–∞–∑—É –Ω–∞ PostgreSQL, –∑–∞–ø—É—Å–∫–∞–µ–º Grafana, –∂–¥–µ–º –ø–æ–∫–∞ —Å–æ–∑–¥–∞—Å—Ç—å—Å—è –≤—Å—è —Å—Ö–µ–º–∞ –ë–î. –ò—Å–ø–æ–ª—å–∑—É—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ë–î –∏–ª–∏ –¥—Ä—É–≥–æ–π –∫–æ–ø–∏—Ä—É–µ–º —Å—Ö–µ–º—É –≤ —Ñ–∞–π–ª —Å –Ω–∞–±–æ—Ä–æ–º SQL –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª—è–µ–º INESERTs, CHANGE –∏ –¥—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –æ—Ç–≤–µ—á–∞—é—â–∏–µ –∑–∞ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î).</p>
</li>
<li>
<p>–í—ã–∫–ª—é—á–∞–µ–º Grafana –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º SQLite –ë–î –≤ –Ω–∞–±–æ—Ä SQL –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000"># –µ—Å–ª–∏ –æ—Ç—Å—É—Å—Ç–≤—É–µ—Ç, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `sqlite3`</span>
sqlite3 grafana.db .dump &gt; grafana.sql
</code></pre></div><blockquote>
<p>–ù–∞–≤–µ—Ä–Ω–æ–µ, –º–Ω–æ–≥–∏–µ –∑–∞–¥–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å–æ–º –∑–∞—á–µ–º –º—ã —Å–¥–µ–ª–∞–ª–∏ —Ñ–∞–π–ª —Å–æ —Å—Ö–µ–º–æ–π –ë–î, –∫–æ–≥–¥–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π sql-—Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å—Ö–µ–º—ã. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —Å—Ö–µ–º–∞ –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ —Ç–∏–ø –ø–æ–ª–µ–π –º–µ–∂–¥—É SQLite –∏ PostgreSQL –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è.</p>
</blockquote>
</li>
<li>
<p>–ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è SQL-—Ñ–∞–π–ª–∞</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">./grafana_sql_migrator.py
</code></pre></div></li>
<li>
<p>–û—á–∏—â–∞–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ö–µ–º—É –ë–î, —É–¥–∞–ª—è—è –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.</p>
</li>
<li>
<p>–°–æ–∑–¥–∞–µ–º –≤—Å—é —Å—Ö–µ–º—É –ë–î –∏–∑ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –Ω–∞ 2–º —à–∞–≥–µ —Ñ–∞–π–ª–∞ —Å–æ —Å—Ö–µ–º–æ–π:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat ./grafana_schema.sql | psql postgresql://&lt;DBUSER&gt;:&lt;DBPASS&gt;@&lt;DBURL&gt;:&lt;DBPORT&gt;/&lt;DBNAME&gt;
</code></pre></div></li>
<li>
<p>–ó–∞–ø–æ–ª–Ω—è–µ–º –ë–î –¥–∞–Ω–Ω—ã–º–∏:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat ./resfile.sql | psql postgresql://&lt;DBUSER&gt;:&lt;DBPASS&gt;@&lt;DBURL&gt;:&lt;DBPORT&gt;/&lt;DBNAME&gt; | grep -v <span style="color:#a31515">&#34;INSERT 0 1&#34;</span>
</code></pre></div><blockquote>
<p><code>grep -v &quot;INSERT 0 1&quot;</code> –ø–æ–∑–≤–æ–ª–∏—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–≤–æ–¥ –æ—Ç —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏.</p>
</blockquote>
</li>
<li>
<p>–ü–æ–¥–≥–æ—Ç–æ–≤–ª–∏–≤–∞–µ–º —Ñ–∞–π–ª –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π:</p>
<p>–í —Ü–µ–ª–æ–º –ø–æ–¥—Ö–æ–¥–æ–≤ –¥–≤–∞:</p>
<ol>
<li>
<p>–û—Ç–∫—Ä—ã—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª <code>grafana.sql</code> –∏ –≤ –µ–≥–æ –∫–æ–Ω—Ü–µ –Ω–∞–π—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±—Ä–æ—Å—É –∏–Ω–¥–µ–∫—Å–æ–≤.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">...
<span style="color:#00f">INSERT</span> <span style="color:#00f">INTO</span> sqlite_sequence <span style="color:#00f">VALUES</span>(<span style="color:#a31515">&#39;org&#39;</span>,1);
<span style="color:#00f">INSERT</span> <span style="color:#00f">INTO</span> sqlite_sequence <span style="color:#00f">VALUES</span>(<span style="color:#a31515">&#39;org_user&#39;</span>,557);
<span style="color:#00f">INSERT</span> <span style="color:#00f">INTO</span> sqlite_sequence <span style="color:#00f">VALUES</span>(<span style="color:#a31515">&#39;preferences&#39;</span>,61);
<span style="color:#00f">INSERT</span> <span style="color:#00f">INTO</span> sqlite_sequence <span style="color:#00f">VALUES</span>(<span style="color:#a31515">&#39;dashboard_tag&#39;</span>,32188);
...
</code></pre></div><p>–ò —É–≤–µ–ª–∏—á–∏–≤ –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É –∫–∞–∂–¥—ã–π –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">...
<span style="color:#00f">alter</span> sequence migration_log_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 458;
...
</code></pre></div></li>
<li>
<p>–ó–∞–π—Ç–∏ PostgreSQL –∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∫–∞–∫–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Å–µ–π—á–∞—Å –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#00f">select</span> <span style="color:#00f">max</span>(id) <span style="color:#00f">from</span> dashboard;
</code></pre></div><p>–ê –∑–∞—Ç–µ–º —Ç–∞–∫–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π.</p>
<blockquote>
<p>–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π, –ø–æ–ª–µ–π –¥–ª—è primary key –ø—Ä–µ–¥–ª–∞–≥–∞—é –≤ —Ñ–∞–π–ª–µ —Å–æ —Å—Ö–µ–º–æ–π –ø–æ–¥–≥–æ–≤–ª–µ–Ω–Ω–æ–π –≤ –ø—É–Ω–∫—Ç–µ 2.</p>
</blockquote>
</li>
</ol>
<p>–Ø –ø—Ä–µ–¥–ª–∞–≥–∞—é –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∏ —ç—Ç–∏ –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.</p>
<p>–ó–∞–±—ã–ª —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç–∞–∫ –∫–∞–∫ —Å–∫—Ä–∏–ø—Ç —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã <code>user_auth</code>, –º—ã –¥–æ–ª–∂–Ω—ã —Å–±—Ä–æ—Å–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ <code>user_auth_id_seq</code> –Ω–∞ 1. –í —á–µ–º –º—ã —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —É–±–µ–¥–∏–º—Å—è, –µ—Å–ª–∏ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ç–æ—Ä–æ–π –ø–æ–¥—Ö–æ–¥.</p>
<p>–í –∏—Ç–æ–≥–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∏—Ç—å—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ–¥–æ–±–Ω—ã–π —Ñ–∞–π–ª <code>reset_sequence.sql</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#008000">-- reset_sequence.sql
</span><span style="color:#008000"></span><span style="color:#00f">alter</span> sequence migration_log_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 458;
<span style="color:#00f">alter</span> sequence user_id_seq1 <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 566;
<span style="color:#00f">alter</span> sequence dashboard_id_seq1 <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 1740;
<span style="color:#00f">alter</span> sequence dashboard_provisioning_id_seq1 <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 1;
<span style="color:#00f">alter</span> sequence data_source_id_seq1 <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 232;
<span style="color:#00f">alter</span> sequence api_key_id_seq1 <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 12;
<span style="color:#00f">alter</span> sequence dashboard_version_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 1300583;
<span style="color:#00f">alter</span> sequence dashboard_acl_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 6;
<span style="color:#00f">alter</span> sequence login_attempt_id_seq1 <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 1;
<span style="color:#00f">alter</span> sequence org_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 2;
<span style="color:#00f">alter</span> sequence org_user_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 566;
<span style="color:#00f">alter</span> sequence preferences_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 64;
<span style="color:#00f">alter</span> sequence dashboard_tag_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 32470;
<span style="color:#00f">alter</span> sequence plugin_setting_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 4;
<span style="color:#00f">alter</span> sequence annotation_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 186463;
<span style="color:#00f">alter</span> sequence tag_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 16;
<span style="color:#00f">alter</span> sequence user_auth_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 1;
<span style="color:#00f">alter</span> sequence star_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 1009;
<span style="color:#00f">alter</span> sequence team_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 3;
<span style="color:#00f">alter</span> sequence team_member_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 4;
<span style="color:#00f">alter</span> sequence alert_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 660;
<span style="color:#00f">alter</span> sequence dashboard_snapshot_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 3067;
<span style="color:#00f">alter</span> sequence alert_notification_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 24;
<span style="color:#00f">alter</span> sequence alert_notification_state_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 886;
<span style="color:#00f">alter</span> sequence playlist_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 3;
<span style="color:#00f">alter</span> sequence playlist_item_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 6;
<span style="color:#00f">alter</span> sequence temp_user_id_seq1 <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 1;
<span style="color:#00f">alter</span> sequence alert_rule_tag_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 1;
<span style="color:#00f">alter</span> sequence annotation_tag_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 57;
<span style="color:#00f">alter</span> sequence server_lock_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 3;
<span style="color:#00f">alter</span> sequence user_auth_token_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 4497;
<span style="color:#00f">alter</span> sequence short_url_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 851;
<span style="color:#00f">alter</span> sequence alert_rule_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 305;
<span style="color:#00f">alter</span> sequence alert_rule_version_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 305;
<span style="color:#00f">alter</span> sequence alert_configuration_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 2;
<span style="color:#00f">alter</span> sequence role_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 7;
<span style="color:#00f">alter</span> sequence user_role_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 4;
<span style="color:#00f">alter</span> sequence permission_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 5269;
<span style="color:#00f">alter</span> sequence builtin_role_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 4;
<span style="color:#00f">alter</span> sequence secrets_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 117;
<span style="color:#00f">alter</span> sequence kv_store_id_seq <span style="color:#00f">restart</span> <span style="color:#00f">with</span> 4;
</code></pre></div><p>–ù—É –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª–Ω—è–µ–º –Ω–∞–±–æ—Ä —ç—Ç–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ –°–£–ë–î. –Ø —Å–æ–≤–µ—Ç—É—é —ç—Ç–æ –¥–µ–ª–∞—Ç—å –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –°–£–ë–î. –ù–æ –º–æ–∂–Ω–æ –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —á–µ—Ä–µ–∑ —É—Ç–∏–ª–∏—Ç—É <code>psql</code></p>
</li>
<li>
<p>–í–∫–ª—é—á–∞–µ–º Grafana, —Å–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—ã WebUI. –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞.</p>
</li>
</ol>
<h2 id="–ø–æ—Å—Ç—Å–∫—Ä–∏–ø—Ç—É–º">–ü–æ—Å—Ç—Å–∫—Ä–∏–ø—Ç—É–º</h2>
<h3 id="—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-—Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö-–≤—ã—Ä–∞–∂–µ–Ω–∏–π">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π</h3>
<ul>
<li>–ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Å–æ–≤–µ—Ç—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∞–π—Ç <a href="https://regex101.com/">regex101</a></li>
<li>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫—É re Python <a href="https://docs.python.org/3/library/re.html">docs.python.org</a></li>
</ul>
<h3 id="–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ-–∑–∞–ø–∏—Å—å-–≤-–±–¥">–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ –∑–∞–ø–∏—Å—å –≤ –ë–î</h3>
<p>–ü—Ä–∏–∫–æ–ª—å–Ω–æ –±—ã–ª–æ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å xargs –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑—É, –Ω–æ —É –º–µ–Ω—è –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ —è –∑–∞–±—Ä–æ—Å–∏–ª –∏–¥–µ—é. –ù–∞—Ä–∞–±–æ—Ç–∫–∏ —É –º–µ–Ω—è —Å–ª–µ–¥—É—é—â–∏–µ:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#008000"># printf %s\\n {0..99} | xargs -n 1 -P 8 script-to-run.sh input/ output/</span>
cat ./resfile.sql | tr <span style="color:#a31515">\\</span>n <span style="color:#a31515">\\</span>0 | xargs -0 -P7 psql postgresql://&lt;DBUSER&gt;:&lt;DBPASS&gt;@&lt;DBURL&gt;:&lt;DBPORT&gt;/&lt;DBNAME&gt; | grep -v <span style="color:#a31515">&#34;INSERT 0 1&#34;</span>
</code></pre></div><p>–ò—Å—Ç–æ—á–Ω–∏–∫–∏:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/28357997/running-programs-in-parallel-using-xargs">Running programs in parallel using xargs</a></li>
<li><a href="https://stackoverflow.com/questions/40859213/exporting-function-with-xargs-parallel-psql-in-bash">Exporting function with xargs parallel &amp; psql in bash</a></li>
<li><a href="https://www.anycodings.com/1questions/4818800/postgresql-parallel-bulk-insert-with-worker-dont-parallelize">Postgresql parallel bulk INSERT with worker dont parallelize</a></li>
<li><a href="https://gist.github.com/podhy/4bd37e38022fc6ad534a85b8d3e6743e">gist podhy/parallel.sh</a></li>
</ul>
<h3 id="–º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ-–¥–∞–Ω–Ω—ã—Ö-—Å-grafana-—Ä–∞–∑–Ω—ã—Ö-–≤–µ—Ä—Å–∏–π">–ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å Grafana —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π</h3>
<p>–°–Ω–∞—á–∞–ª–∞ —è –ø—ã—Ç–∞–ª—Å—è –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ Grafana –≤–µ—Ä—Å–∏–∏ 7.5.9 –≤ 9.2.0. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ —Å—Ö–µ–º—ã –æ—Ç–ª–∏—á–∞–ª–∏—Å—å –Ω–µ–º–Ω–æ–≥–æ (–≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –∏–º–µ–ª–∏—Å—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö, —á—Ç–æ –Ω–µ –≤—ã–∑—ã–≤–∞–ª–æ –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ INSERT). –ü—Ä–æ–±–ª–µ–º–∞ –∫—Ä—ã–ª–∞—Å—å –≤ —Ç–æ–º, —á—Ç–æ –≤ Grafana –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É <code>migration_log</code>. –ò –µ—Å–ª–∏ –≤–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã –ë–î –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">lvl=eror msg=‚ÄúExecuting migration failed‚Äù logger=migrator id=‚Äúcopy data_source v1 to v2‚Äù error=‚Äúpq: column ‚Äúaccount_id‚Äù does not exist‚Äù
</code></pre></div><p>–ò—Å—Ç–æ—á–Ω–∏–∫: <a href="https://github.com/grafana/grafana/issues/16720"> bug with upgrade from 6.0.2 to 6.1.3 or 6.1.4 : column account_id does not exist #16720 </a></p>
<p>–ü–æ—ç—Ç–æ–º—É –≤—Å–µ–≥–¥–∞ —Å–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–ª—è–µ–º Grafana –¥–æ –Ω—É–∂–Ω–æ –≤–µ—Ä—Å–∏–∏ –Ω–∞ —Ç–æ–π –∂–µ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∞ –ª–∏—à—å –∑–∞—Ç–µ–º –¥–µ–ª–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –≤ –¥—Ä—É–≥—É—é –°–£–ë–î.</p>

            </div>

            <div class="tags">
                 
                <ul class="flat">
                    
                    <li><a href="/tags/ru">ru</a></li>
                    
                    <li><a href="/tags/programming">programming</a></li>
                    
                </ul>
                 
            </div>

<br/>
<script defer src="https://commento.urpylka.com/js/commento.js" data-css-override="/css/commento.css"></script>
<div id="commento"></div>
<noscript>Please enable JavaScript to load the comments.</noscript></div>
    </div>
    <div class="footer wrapper">
	<nav class="nav">
		<div>2022  ¬© Artem Smirnov |  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div><script>feather.replace()</script>
</body>

</html>